
##### TCP6种标志位:
```
SYN(synchronous建立联机)
ACK(acknowledgement 确认)
PSH(push传送)
FIN(finish结束)
RST(reset重置)
URG(urgent紧急)
Sequence number(顺序号码)
Acknowledge number(确认号码)
```
##### TCP状态标识:
```
LISTEN - 侦听来自远方TCP端口的连接请求; 
SYN-SENT -在发送连接请求后等待匹配的连接请求; 
SYN-RECEIVED - 在收到和发送一个连接请求后等待对连接请求的确认; 
ESTABLISHED- 代表一个打开的连接，数据可以传送给用户; 
FIN-WAIT-1 - 等待远程TCP的连接中断请求，或先前的连接中断请求的确认;
FIN-WAIT-2 - 从远程TCP等待连接中断请求; 
CLOSE-WAIT - 等待从本地用户发来的连接中断请求; 
CLOSING -等待远程TCP对连接中断的确认; 
LAST-ACK - 等待原来发向远程TCP的连接中断请求的确认; 
TIME-WAIT -等待足够的时间以确保远程TCP接收到连接中断请求的确认; 
CLOSED - 没有任何连接状态;
```

1. 第一次握手：建立连接时，客户端发送syn包(syn=j ack=0 seq=x)到服务器，并进入SYN_SEND状态，等待服务器确认; 
2. 第二次握手：服务器收到syn包，必须确认客户的SYN(ack=j+1），同时自己也发送一个SYN包(syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态; 
3. 第三次握手：客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=k+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。
4. 至此浏览器随机端口与服务器端口的TCP/IP连接建立成功

##### ?:为何TCP建立连接需要三次握手,而不是两次,四次
```
第一次握手： A给B打电话说，你可以听到我说话吗？
第二次握手： B收到了A的信息，然后对A说： 我可以听得到你说话啊，你能听得到我说话吗？  
第三次握手： A收到了B的信息，然后说可以的，我要给你发信息啦！ 
在三次握手之后，A和B都能确定这么一件事： 我说的话，你能听到; 你说的话，我也能听到。 这样，就可以开始正常通信了。
注意： HTTP是基于TCP协议的，所以每次都是客户端发送请求，服务器应答，但是TCP还可以给其他应用层提供服务，
即可能A、B在建立链接之后，谁都可能先开始通信。
如果两次，那么B无法确定B的信息A是否能收到，所以如果B先说话，可能后面的A都收不到，会出现问题 。
如果四次，那么就造成了浪费，因为在三次结束之后，就已经可以保证A可以给B发信息，A可以收到B的信息; B可以给A发信息，B可以收到A的信息。
```

##### 断开TCP/IP连接

 TCP的连接的拆除需要发送四个包，因此称为四次挥手(four-way handshake)。客户端或服务器均可主动发起挥手动作，在socket编程中，任何一方执行close()操作即可产生挥手操作。

1. 客户端A发送一个FIN，用来关闭客户A到服务器B的数据传送。 

2. 服务器B收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。和SYN一样，一个FIN将占用一个序号。 

3. 服务器B关闭与客户端A的连接，发送一个FIN给客户端A。 

4. 客户端A发回ACK报文确认，并将确认序号设置为收到序号加1。 
